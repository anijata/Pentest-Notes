* Metasploit setup:
	* `sudo msfdb init`: Initializes database for Metasploit.
	* `sudo systemctl enable postgresql`: enable prostgresgsql to start on boot time
* Useful commands
	* Common commands:
		* `help`: Gives you information and commands that can be used. 
		* `sessions`: Shows you all currently active shell sessions .
		* `search <search term>` or `search type:<module type>`: search command for modules, payloads, etc.
	* Database commands:
		* `workspace`: Lists workspaces which are logical division to separate information per situation.
		* `db_status`: Checks database connection status. 
		* `db_nmap`: Runs nmap results and stores in database.
		* `hosts`: Hosts info in database
		* `services`: Services found stored in the database after scanning type modules or db_nmap.
		* `vulns`: Vulnerability info stored in database after running auxiliary type modules.
		* `creds`: Credentials found after running credential exploit type modules.
	* Module commands:
		* `info`: Gives module info
		* `show options`: Shows options that are set for module. 
		* `set <option>`: Sets an option for the module.
		* `run`: Runs module.
		* `show payloads`: Shows available payloads for the module.
		* `set <payload>`: Sets a payload for the module.
		* `show targets`: Shows available targets this module can be used on. Target can refer to OS, architecture etc. 
		* `set <target>`: Sets a target option for module.
* Auxiliary modules: Usually meant for scanning target for ports, software version, checking vulnerability to an exploit.
* Exploit Modules: Modules meant exploit machine.
	* multi/handler: Handy module for accepting or sending connections for shells.
* Payloads: Usually refers to the bind/reverse shell code that is sent alongside with exploit code.
	* Staged payloads: Payloads meant to be sent to the target in a several pieces in order to reduce the amount payload size that can be sent with the exploit code.
	* Non-Staged payloads: Payload meant to be with exploit code all in one go to reduce amount of network noise made.
	* Meterpreter payloads: Special kinds of payload which makes it easier to hold multiple shell sessions, post exploitations, enumeration, pivoting on the target machine.
		* It is not a bad idea to use non-stage payloads for meterpreter.
	* Executable payloads using msfvenom: msfvenom is a standalone tool from metasploit can be used to create executables which contain metasploit payloads. 
		* Great to use with multi/handler module to receive any connections after executing the executable.
* Post-Exploitation:
	* Meterpreter post exploitation:
		* `help`: Displays all commands associated with Meterpreter shell.
		* `getsystem`: Attempts priviledge escalation for root or system account. 
		* `ps`: Lists processes.
		* `migrate <pid>`: Given process id will hijack the running process and make it a process for meterpreter while keeping the same process name . This will close the previous meterpreter process. Great for hiding it under another process name.
		* `shell`: Opens a proper shell.
		* `getuid`: Get username
		* `execute`: Executes a file.
		* `bg`: Executes session as a background job. 
		* `use -l`: Lists extension modules that can be loaded used with meterpreter session.
		* `use kiwi`: kiwi extension module has the same capabilities as mimikatz and can be used to  dump credentials.
	* Post exploit modules: Search for exploits that be used, for example a UAC exploit, that can sent to the meterpreter and executed locally on the machine.
* Pivoting using Metasploit: Similar to techniques in SSH tunneling and port forwarding to pivot across hosts and networks.
	* `route add <subnet> <session no>` command: Using a shell session as gateway can add a route so that the route can be used across all metasploit modules. 
	* `multi/manage/autoroute` module: Automated version of `route` which adds routes using the session as gateway.
	* `auxiliary/server/socks_proxy`: Sets up a proxy so that not only metasploit modules but also all programs in attack machine to route traffic across hosts, networks.
* Metasploit automation:
	* Run automation scripts alonside with metasploit.
	* `msfconsole -r <script>.rc` launches a ruby script with msfconsole.
	* `ls -l /usr/share/metasploit-framework/scripts/resource`: Directory on kali with ruby scripts to run with msfconsole.
	* Use cases: 
		* Setup multi/handler to listen for connections upon starting metasploit.
		* Conduct port scan upon opening a session on target.
		* Auto exploit upon opening a session on target.