* If Desktop/Citrix sessions have restrictions on what files can be viewed through file explorer and executed such cmd.exe, powershell.exe then below techniques help acheive command execution.
* Basic Methodology for break-out:
	* Gain access to a Dialog Box.
	* Exploit the Dialog Box to achieve command execution.
	* Escalate privileges to gain higher levels of access.
* Use applications like Mspaint , notepad, wordpad etc that have option to get to "open file" dialog box.
	* In filename field type UNC path of directory restricted by file explorer and open/execute the file.
	* Alternatively open a smb server on kali with various tools, then enter UNC path and open/execute file. 
	* Make sure to set file type to "All files"
* Alternatives to file explorer: `Q-Dir`, `Explorer++`
* Alternative to registry editor: [Simpleregedit](https://sourceforge.net/projects/simpregedit/), [Uberregedit](https://sourceforge.net/projects/uberregedit/) and [SmallRegistryEditor](https://sourceforge.net/projects/sre/)
* Modify existing shortcut file:
	* Right-click the desired shortcut.
	* Select Properties.
	* Within the Target field, modify the path to the intended folder for access to `C:\Windows\System32\cmd.exe`. 
* Script Execution for .vbs, .bat, .ps etc:
	* Create a new text file and name it "evil.bat".
	* Open "evil.bat" with a text editor such as Notepad.
	* Input the command "cmd" into the file.

* Reference: [Breaking out of Citrix and other Restricted Desktop environments](https://www.pentestpartners.com/security-blog/breaking-out-of-citrix-and-other-restricted-desktop-environments/)
- Reference: [Breaking out of Windows Environments](https://node-security.com/posts/breaking-out-of-windows-environments/)